<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="generator"
      content="Dependency License Collector v{{ dlc.version }}"
    />
    <title>
      Dependency Licenses{% if target_name %} of {{ target_name }}{% endif %}
    </title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Emoji&display=swap"
      rel="stylesheet"
    />
    <style type="text/css">
      footer {
        margin-top: 1rem;
        border-top: 1px solid gray;
      }

      td[class*="right aligned"] {
        text-align: right;
      }

      .property-list {
        display: grid;
        grid-template-columns: max-content max-content;
      }

      .property-list dt {
        font-weight: bold;
      }

      .property-list dt::after {
        content: ":";
      }

      .property-list dd {
        margin-left: 1rem;
      }

      .license-table {
        border-collapse: collapse;
      }

      .license-table th,
      .license-table td {
        border: 1px solid gray;
        padding: 0.1rem 0.2rem;
      }

      .license-table td:last-child {
        text-align: center;
      }

      .license-table a:any-link {
        text-decoration: none;
      }

      .emoji {
        font-family: "Noto Emoji";
      }
    </style>
  </head>
  <body>
    <h1>
      Dependency Licenses{% if target_name %} of {{ target_name }}{% endif %}
    </h1>

    <h2>Summary</h2>
    <dl class="property-list">
      <dt>Target Software</dt>
      <dd>{{ target_name or "Unknown" }}</dd>
      <dt>Language</dt>
      <dd>{{ language }}</dd>
      <dt>Executed at</dt>
      <dd>{{ start_time }}</dd>
      <dt>Number of Packages Processed</dt>
      <dd>{{ packages | length }}</dd>
      <dt>Number of Failures</dt>
      <dd>{{ num_failures }}</dd>
    </dl>

    <h2>License List</h2>
    <table class="license-table">
      <thead>
        <tr>
          <th abbr="Number">#</th>
          <th>Name</th>
          <th>Version</th>
          <th>License Name</th>
          <th>License File</th>
          <th colspan="2">Links</th>
          <th>Log</th>
        </tr>
      </thead>
      <tbody>
        {% for package in packages %}
        <tr>
          <td class="right aligned">{{ loop.index }}</td>
          <td><tt>{{ package.name }}</tt></td>
          <td>{{ package.version }}</td>
          <td>{{ package.license_name or "N/A" }}</td>
          <td>
            {% if not package.license_file is none %}
            <tt
              ><a href="license_files/{{ package.name }}.txt"
                >{{ package.name }}.txt</a
              ></tt
            >
            {% else %} N/A {% endif %}
          </td>
          <td>
            {% if package.registry_data.info.home_page %}
            <a
              class="emoji"
              title="Home Page"
              href="{{ package.registry_data.info.home_page }}"
              >üè†</a
            >
            {% endif %}
          </td>
          <td>
            {% if package.registry_data.info.project_url %}
            <a
              class="emoji"
              title="Package Registry"
              href="{{ package.registry_data.info.project_url }}"
              >üì¶</a
            >
            {% endif %}
          </td>
          <td>
            {% if package.registry_data.info.project_url %}
            <a
              class="emoji"
              title="Package Registry Data"
              href="registry_data/{{ package.name }}.json"
              >üìú</a
            >
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <h2>Input Source</h2>
    <pre>{{ input_source }}</pre>

    <footer>
      <p>
        Generated by
        <a href="https://github.com/sgryjp/dependency-license-collector"
          >Dependency License Collector</a
        >
        version {{ dlc.version }}
      </p>
    </footer>
  </body>
</html>
